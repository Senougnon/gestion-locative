const _0x15862f=_0xc63c;(function(_0x225a85,_0x48cf67){const _0x289888=_0xc63c,_0x3758c7=_0x225a85();while(!![]){try{const _0x3925e5=-parseInt(_0x289888(0x1e3))/0x1*(parseInt(_0x289888(0x1f1))/0x2)+-parseInt(_0x289888(0x254))/0x3+-parseInt(_0x289888(0x255))/0x4*(-parseInt(_0x289888(0x1b3))/0x5)+parseInt(_0x289888(0x252))/0x6*(-parseInt(_0x289888(0x19e))/0x7)+-parseInt(_0x289888(0x245))/0x8*(parseInt(_0x289888(0x1a5))/0x9)+parseInt(_0x289888(0x1ba))/0xa+-parseInt(_0x289888(0x1ae))/0xb;if(_0x3925e5===_0x48cf67)break;else _0x3758c7['push'](_0x3758c7['shift']());}catch(_0x2aba0b){_0x3758c7['push'](_0x3758c7['shift']());}}}(_0x4956,0x1d868));import{initializeApp}from'https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js';function _0xc63c(_0xa9bcb,_0x2a84fe){const _0x4956c5=_0x4956();return _0xc63c=function(_0xc63c3a,_0x4927c9){_0xc63c3a=_0xc63c3a-0x18d;let _0x528888=_0x4956c5[_0xc63c3a];return _0x528888;},_0xc63c(_0xa9bcb,_0x2a84fe);}import{getDatabase,ref,get,set,push,onValue,remove,update}from'https://www.gstatic.com/firebasejs/10.12.2/firebase-database.js';const firebaseConfig={'apiKey':_0x15862f(0x1a4),'authDomain':_0x15862f(0x20e),'databaseURL':_0x15862f(0x1c1),'projectId':_0x15862f(0x1fe),'storageBucket':_0x15862f(0x1d4),'messagingSenderId':'45709890480','appId':_0x15862f(0x239),'measurementId':_0x15862f(0x1ca)},app=initializeApp(firebaseConfig),database=getDatabase(app);let isAuthenticated=![];const authSection=document[_0x15862f(0x21f)](_0x15862f(0x23f)),loginFormContainer=document[_0x15862f(0x21f)](_0x15862f(0x23e)),registerFormContainer=document[_0x15862f(0x21f)]('register-form-container'),loginForm=document[_0x15862f(0x21f)]('login-form'),registerForm=document[_0x15862f(0x21f)]('register-form'),showRegisterLink=document[_0x15862f(0x21f)](_0x15862f(0x1ff)),showLoginLink=document[_0x15862f(0x21f)]('show-login');let currentUser=null;const storedUser=localStorage[_0x15862f(0x1f5)](_0x15862f(0x1e7));storedUser&&(currentUser=JSON['parse'](storedUser),isAuthenticated=!![]);showRegisterLink[_0x15862f(0x1d3)](_0x15862f(0x18f),()=>{const _0x5c1e6f=_0x15862f;loginFormContainer['style'][_0x5c1e6f(0x217)]='none',registerFormContainer[_0x5c1e6f(0x1dd)]['display']='block';}),showLoginLink[_0x15862f(0x1d3)]('click',()=>{const _0x2a6a32=_0x15862f;registerFormContainer[_0x2a6a32(0x1dd)]['display']=_0x2a6a32(0x258),loginFormContainer['style']['display']=_0x2a6a32(0x225);}),registerForm[_0x15862f(0x1d3)](_0x15862f(0x205),async _0x56e59b=>{const _0x3495cc=_0x15862f;_0x56e59b[_0x3495cc(0x1f8)](),showLoading();const _0x1732e0=document['getElementById'](_0x3495cc(0x23a))[_0x3495cc(0x1f7)],_0x41a592=document['getElementById'](_0x3495cc(0x1c8))[_0x3495cc(0x1f7)];try{const _0x50c3e2=simpleHash(_0x41a592),_0x591138=ref(database,_0x3495cc(0x198));await push(_0x591138,{'username':_0x1732e0,'password':_0x50c3e2,'role':_0x3495cc(0x1b2)}),alert(_0x3495cc(0x206)),registerForm[_0x3495cc(0x1aa)](),showLoginForm();}catch(_0x50974a){console['error'](_0x3495cc(0x1cc),_0x50974a),alert(_0x3495cc(0x1f6));}finally{hideLoading();}});function showLoginForm(){const _0x5078ec=_0x15862f;registerFormContainer[_0x5078ec(0x1dd)][_0x5078ec(0x217)]='none',loginFormContainer['style'][_0x5078ec(0x217)]=_0x5078ec(0x225);}loginForm[_0x15862f(0x1d3)](_0x15862f(0x205),async _0x538038=>{const _0x1a90d4=_0x15862f;_0x538038[_0x1a90d4(0x1f8)](),showLoading();const _0x1c4345=document[_0x1a90d4(0x21f)](_0x1a90d4(0x251))[_0x1a90d4(0x1f7)],_0x440a9=document[_0x1a90d4(0x21f)]('login-password')[_0x1a90d4(0x1f7)];try{const _0x52cb9e=ref(database,_0x1a90d4(0x198)),_0x576708=await get(_0x52cb9e);if(_0x576708['exists']()){const _0x3f9069=_0x576708[_0x1a90d4(0x209)]();let _0x56247e=![];for(const _0x182a0f in _0x3f9069){const _0x191a8d=_0x3f9069[_0x182a0f];if(_0x191a8d[_0x1a90d4(0x1c5)]===_0x1c4345&&_0x191a8d['password']===simpleHash(_0x440a9)){currentUser={'id':_0x182a0f,'username':_0x191a8d[_0x1a90d4(0x1c5)],'role':_0x191a8d[_0x1a90d4(0x191)],'subscription':_0x191a8d[_0x1a90d4(0x192)]||{}},isAuthenticated=!![],localStorage['setItem']('currentUser',JSON[_0x1a90d4(0x242)](currentUser)),checkUserRoleAndSubscription(),hideAuthSection(),loadDashboardData(),initializeDataLoad(),_0x56247e=!![];break;}}!_0x56247e&&alert('Pseudo\x20ou\x20mot\x20de\x20passe\x20incorrect.');}else alert(_0x1a90d4(0x24f));}catch(_0x11e89c){console['error'](_0x1a90d4(0x1cb),_0x11e89c),alert('Erreur\x20lors\x20de\x20la\x20connexion.');}finally{hideLoading();}});async function checkAndUpdateSubscriptionStatus(){const _0xdc1d79=_0x15862f;if(currentUser&&currentUser['subscription']){const _0x837e54=new Date(),_0xe5beb3=new Date(currentUser[_0xdc1d79(0x192)][_0xdc1d79(0x208)]);if(_0x837e54>_0xe5beb3)currentUser[_0xdc1d79(0x192)]['status']=_0xdc1d79(0x219),await update(ref(database,_0xdc1d79(0x197)+currentUser['id']+_0xdc1d79(0x22d)),{'status':'expired'}),localStorage['setItem']('currentUser',JSON[_0xdc1d79(0x242)](currentUser)),alert(_0xdc1d79(0x233)),checkUserRoleAndSubscription();else{const _0x29d37b=Math['round']((_0xe5beb3-_0x837e54)/(0x3e8*0x3c*0x3c*0x18));_0x29d37b<=0x2&&alert(_0xdc1d79(0x1cf)+_0x29d37b+_0xdc1d79(0x232));}}}function checkUserRoleAndSubscription(){const _0x245c6f=_0x15862f;if(currentUser){const _0x68c90e=currentUser['role']==='admin',_0x52449e=document[_0x245c6f(0x21f)](_0x245c6f(0x1d7)),_0x24985b=document[_0x245c6f(0x21f)](_0x245c6f(0x1eb)),_0x1c5d71=document[_0x245c6f(0x21f)](_0x245c6f(0x201)),_0x1b570e=document['getElementById'](_0x245c6f(0x1e2));_0x52449e&&(_0x52449e[_0x245c6f(0x1dd)]['display']=_0x68c90e?_0x245c6f(0x225):_0x245c6f(0x258));_0x24985b&&(_0x24985b[_0x245c6f(0x1dd)][_0x245c6f(0x217)]=_0x68c90e?'block':'none');_0x1c5d71&&(_0x1c5d71[_0x245c6f(0x1dd)]['display']=_0x68c90e?'block':_0x245c6f(0x258));_0x1b570e&&(_0x1b570e[_0x245c6f(0x1dd)][_0x245c6f(0x217)]=_0x68c90e?_0x245c6f(0x225):_0x245c6f(0x258));const _0x53685d=currentUser[_0x245c6f(0x192)],_0x54357d=_0x53685d&&_0x53685d[_0x245c6f(0x1c3)]===_0x245c6f(0x1e8),_0x4c937f=document[_0x245c6f(0x21f)]('subscribe-monthly-btn'),_0x1eee4d=document['getElementById'](_0x245c6f(0x25b)),_0x2881fc=document[_0x245c6f(0x21f)](_0x245c6f(0x1c4)),_0x545f28=document['getElementById'](_0x245c6f(0x24d));_0x54357d?(document[_0x245c6f(0x21f)]('abonnement-status-text')['textContent']=_0x245c6f(0x238),_0x4c937f[_0x245c6f(0x1dd)][_0x245c6f(0x217)]=_0x245c6f(0x258),_0x1eee4d[_0x245c6f(0x1dd)][_0x245c6f(0x217)]=_0x245c6f(0x258),_0x2881fc[_0x245c6f(0x1dd)]['display']=_0x245c6f(0x225),_0x545f28[_0x245c6f(0x1dd)][_0x245c6f(0x217)]=_0x245c6f(0x258)):(document[_0x245c6f(0x21f)](_0x245c6f(0x1a3))['textContent']='Non\x20abonné',_0x4c937f[_0x245c6f(0x1dd)]['display']=_0x245c6f(0x225),_0x1eee4d[_0x245c6f(0x1dd)]['display']=_0x245c6f(0x225),_0x2881fc[_0x245c6f(0x1dd)][_0x245c6f(0x217)]=_0x245c6f(0x258),_0x545f28['style']['display']=_0x245c6f(0x225)),localStorage[_0x245c6f(0x19b)](_0x245c6f(0x1e7),JSON[_0x245c6f(0x242)](currentUser));}}function simpleHash(_0x4b17c9){const _0x423efd=_0x15862f;let _0x11a1b6=0x0;for(let _0x3ad5ed=0x0;_0x3ad5ed<_0x4b17c9['length'];_0x3ad5ed++){const _0x1432a7=_0x4b17c9[_0x423efd(0x1d1)](_0x3ad5ed);_0x11a1b6=(_0x11a1b6<<0x5)-_0x11a1b6+_0x1432a7,_0x11a1b6|=0x0;}return _0x11a1b6['toString']();}function showMainInterface(){const _0x314254=_0x15862f;authSection[_0x314254(0x1dd)][_0x314254(0x217)]=_0x314254(0x258);}function hideAuthSection(){const _0x11d206=_0x15862f;authSection[_0x11d206(0x1dd)]['display']='none';}const tabs=document[_0x15862f(0x214)](_0x15862f(0x20f)),contentSections=document[_0x15862f(0x214)](_0x15862f(0x220));tabs[_0x15862f(0x1da)](_0x4bb63a=>{const _0xf7e29a=_0x15862f;_0x4bb63a[_0xf7e29a(0x1d3)](_0xf7e29a(0x18f),()=>{const _0x1cf43d=_0xf7e29a,_0x5198a7=_0x4bb63a[_0x1cf43d(0x1ab)]['target'];checkUserAccess(_0x5198a7),tabs[_0x1cf43d(0x1da)](_0x565387=>_0x565387['classList'][_0x1cf43d(0x1bd)](_0x1cf43d(0x1e8))),_0x4bb63a[_0x1cf43d(0x196)][_0x1cf43d(0x213)](_0x1cf43d(0x1e8));});});function showLoading(){const _0xb99db2=_0x15862f;document[_0xb99db2(0x21f)]('loading-overlay')[_0xb99db2(0x1dd)][_0xb99db2(0x217)]=_0xb99db2(0x19c);}function hideLoading(){const _0x606410=_0x15862f;document[_0x606410(0x21f)](_0x606410(0x1bb))['style'][_0x606410(0x217)]=_0x606410(0x258);}const addProprietaireBtn=document[_0x15862f(0x21f)]('add-proprietaire-btn'),addMaisonBtn=document[_0x15862f(0x21f)](_0x15862f(0x1eb)),addLocataireBtn=document[_0x15862f(0x21f)]('add-locataire-btn'),addSouscriptionBtn=document['getElementById'](_0x15862f(0x1e2)),addProprietaireForm=document['getElementById']('add-proprietaire-form'),addMaisonForm=document[_0x15862f(0x21f)](_0x15862f(0x23b)),addLocataireForm=document['getElementById'](_0x15862f(0x20b)),addSouscriptionForm=document['getElementById'](_0x15862f(0x199)),cancelProprietaireBtn=document[_0x15862f(0x21f)]('cancel-proprietaire-btn'),cancelMaisonBtn=document[_0x15862f(0x21f)]('cancel-maison-btn'),cancelLocataireBtn=document['getElementById']('cancel-locataire-btn'),cancelSouscriptionBtn=document[_0x15862f(0x21f)]('cancel-souscription-btn');function showForm(_0x41843f){const _0x3ee3eb=_0x15862f;_0x41843f[_0x3ee3eb(0x196)][_0x3ee3eb(0x213)](_0x3ee3eb(0x1e8));}function hideForm(_0x32bfe9){const _0x423b51=_0x15862f;_0x32bfe9[_0x423b51(0x196)][_0x423b51(0x1bd)](_0x423b51(0x1e8)),_0x32bfe9[_0x423b51(0x1aa)]();}function _0x4956(){const _0x13b5d7=['dashboard-proprietaires-count','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions-cell\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-btn\x22\x20data-id=\x22','dashboard-maisons-count','locataire-email','DIALOG_DISMISSED','dashboard-locataires-count','/subscription','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','Erreur\x20lors\x20de\x20l\x27ajout\x20du\x20propriétaire:','textContent','proprietaire-email','\x20jour(s).\x20Pensez\x20à\x20le\x20renouveler.','Votre\x20abonnement\x20a\x20expiré.\x20Veuillez\x20renouveler\x20votre\x20abonnement\x20pour\x20continuer\x20à\x20utiliser\x20les\x20fonctionnalités\x20premium.','\x22>Modifier</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-btn\x22\x20data-id=\x22','</td>\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','type','abonnements','Abonné','1:45709890480:web:70882a74b40d7e6dd1bc75','register-username','add-maison-form','Erreur\x20lors\x20du\x20paiement.\x20Veuillez\x20réessayer.','Vous\x20avez\x20déjà\x20une\x20période\x20d\x27essai\x20en\x20cours.','login-form-container','auth-section','Vous\x20avez\x20déjà\x20un\x20abonnement\x20actif.','createElement','stringify','[data-target=\x22abonnements\x22]','maison-proprietaire','26248QIEaMT','annuel','locataires','proprietaires/','user@example.com','maison-loyer','locataire-prenom','then','trial-info','</td>\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','Aucun\x20utilisateur\x20trouvé.','Erreur\x20lors\x20de\x20l\x27ajout\x20du\x20locataire.','login-username','1032ubIqhr','logout-btn','70914SdaCFu','19648INorEs','proprietaire','href','none','\x20réussi!','button','subscribe-yearly-btn','souscription-avance','contains','cancelled','click','edit-btn','role','subscription','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','body','now','classList','users/','users','add-souscription-form','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions-cell\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-btn\x22\x20data-id=\x22','setItem','flex','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','56DoYTsk','\x20-\x20','Propriétaire\x20inconnu','open','maison-type','abonnement-status-text','AIzaSyDV9DuhmNManTUEH5jcyHAanq14pHRsIOY','9Tknrrf','Erreur\x20lors\x20de\x20la\x20suppression\x20de\x20','getTime','autres','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','reset','dataset','prenom','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','720104FAAAaA','Paiement\x20annulé.','Erreur\x20lors\x20de\x20l\x27ajout\x20de\x20la\x20souscription.','Transaction\x20:\x20','user','130BHaCBM','#locataires-list\x20tbody','Vous\x20n\x27avez\x20pas\x20d\x27abonnement\x20actif\x20à\x20annuler.','querySelector','commune','Erreur\x20lors\x20de\x20l\x27ajout\x20de\x20la\x20souscription:','text','1670850xUlsov','loading-overlay','location','remove','catch','keys','pieces','https://kora-cbad5-default-rtdb.firebaseio.com','<option\x20value=\x22\x22>Sélectionner\x20Maison</option>','status','cancel-subscription-btn','username','souscription-autres','dashboard-souscriptions-count','register-password','removeItem','G-T2CKMZSXXC','Erreur\x20lors\x20de\x20la\x20connexion\x20:','Erreur\x20lors\x20de\x20l\x27inscription\x20:','appendChild','souscription-locataire','Votre\x20abonnement\x20expirera\x20dans\x20','monthly','charCodeAt','#souscriptions-list\x20tbody','addEventListener','kora-cbad5.firebasestorage.app','reason','#maisons-list\x20tbody','add-proprietaire-btn','<option\x20value=\x22\x22>Sélectionner\x20Locataire</option>','option','forEach','closest','trial','style','toISOString','\x22>Supprimer</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Abonnement\x20mensuel\x20à\x20la\x20plateforme\x20de\x20gestion\x20locative','Déconnexion','add-souscription-btn','80102adEAFu','avance','Modifier','\x22>Modifier</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-btn\x22\x20data-id=\x22','currentUser','active','pk_live_TfSz212W0xSMKK7oPEogkFmp','nom','add-maison-btn','</td>\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','error','index.html','proprietaire-nom','maison','2bbUkay','<option\x20value=\x22\x22>Sélectionner\x20Propriétaire</option>','loyer','maison-commune','getItem','Erreur\x20lors\x20de\x20l\x27inscription.','value','preventDefault','proprietaires','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','innerHTML','Êtes-vous\x20sûr\x20de\x20vouloir\x20annuler\x20votre\x20abonnement\x20?','log','kora-cbad5','show-register','\x22>Supprimer</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','add-locataire-btn','maison-pieces','ville','souscription-date-debut','submit','Inscription\x20réussie\x20!','souscriptions','endDate','val','\x22>Modifier</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-btn\x22\x20data-id=\x22','add-locataire-form','souscription-maison','Période\x20d\x27essai\x20de\x207\x20jours\x20activée\x20!','kora-cbad5.firebaseapp.com','.nav-button','finally','contact','length','add','querySelectorAll','caution','maisons','display','subscribe-monthly-btn','expired','Erreur\x20lors\x20de\x20l\x27ajout\x20de\x20la\x20maison.','#proprietaires-list\x20tbody','quartier','Erreur\x20lors\x20de\x20l\x27ajout\x20de\x20la\x20maison:','maison-quartier','getElementById','.content-section','maisons/','delete-btn','proprietaire-adresse','email','block','Erreur\x20lors\x20de\x20l\x27ajout\x20du\x20locataire:'];_0x4956=function(){return _0x13b5d7;};return _0x4956();}addProprietaireBtn[_0x15862f(0x1d3)](_0x15862f(0x18f),()=>showForm(addProprietaireForm)),addMaisonBtn[_0x15862f(0x1d3)](_0x15862f(0x18f),()=>showForm(addMaisonForm)),addLocataireBtn[_0x15862f(0x1d3)](_0x15862f(0x18f),()=>showForm(addLocataireForm)),addSouscriptionBtn['addEventListener'](_0x15862f(0x18f),()=>showForm(addSouscriptionForm)),cancelProprietaireBtn[_0x15862f(0x1d3)](_0x15862f(0x18f),()=>hideForm(addProprietaireForm)),cancelMaisonBtn[_0x15862f(0x1d3)](_0x15862f(0x18f),()=>hideForm(addMaisonForm)),cancelLocataireBtn[_0x15862f(0x1d3)](_0x15862f(0x18f),()=>hideForm(addLocataireForm)),cancelSouscriptionBtn['addEventListener']('click',()=>hideForm(addSouscriptionForm)),addProprietaireForm[_0x15862f(0x1d3)](_0x15862f(0x205),_0x107b46=>{const _0x232cf2=_0x15862f;_0x107b46[_0x232cf2(0x1f8)](),showLoading();const _0x45a8ef=document['getElementById'](_0x232cf2(0x1ef))[_0x232cf2(0x1f7)],_0x5adee8=document['getElementById']('proprietaire-prenom')[_0x232cf2(0x1f7)],_0x1cd230=document[_0x232cf2(0x21f)]('proprietaire-contact')['value'],_0x17bb42=document['getElementById'](_0x232cf2(0x231))[_0x232cf2(0x1f7)],_0x146268=document[_0x232cf2(0x21f)](_0x232cf2(0x223))[_0x232cf2(0x1f7)];addProprietaire(_0x45a8ef,_0x5adee8,_0x1cd230,_0x17bb42,_0x146268)[_0x232cf2(0x24c)](()=>{hideForm(addProprietaireForm),loadProprietaires();})[_0x232cf2(0x1be)](_0x5d628a=>{const _0x3f5f5a=_0x232cf2;console[_0x3f5f5a(0x1ed)](_0x3f5f5a(0x22f),_0x5d628a),alert('Erreur\x20lors\x20de\x20l\x27ajout\x20du\x20propriétaire.');})[_0x232cf2(0x210)](()=>{hideLoading();});}),addMaisonForm[_0x15862f(0x1d3)]('submit',_0xb346f8=>{const _0x57db92=_0x15862f;_0xb346f8[_0x57db92(0x1f8)](),showLoading();const _0x1ce0ae=document[_0x57db92(0x21f)](_0x57db92(0x244))[_0x57db92(0x1f7)],_0x3d7991=document['getElementById'](_0x57db92(0x1a2))[_0x57db92(0x1f7)],_0x3b2fa7=parseInt(document[_0x57db92(0x21f)](_0x57db92(0x202))['value']),_0x516062=document[_0x57db92(0x21f)]('maison-ville')[_0x57db92(0x1f7)],_0x5a28f2=document[_0x57db92(0x21f)](_0x57db92(0x1f4))[_0x57db92(0x1f7)],_0x186973=document[_0x57db92(0x21f)](_0x57db92(0x21e))[_0x57db92(0x1f7)],_0x11f9eb=parseInt(document[_0x57db92(0x21f)](_0x57db92(0x24a))['value']);addMaison(_0x1ce0ae,_0x3d7991,_0x3b2fa7,_0x516062,_0x5a28f2,_0x186973,_0x11f9eb)[_0x57db92(0x24c)](()=>{hideForm(addMaisonForm),loadMaisons();})['catch'](_0x2c4193=>{const _0x15732e=_0x57db92;console[_0x15732e(0x1ed)](_0x15732e(0x21d),_0x2c4193),alert(_0x15732e(0x21a));})[_0x57db92(0x210)](()=>{hideLoading();});}),addLocataireForm[_0x15862f(0x1d3)](_0x15862f(0x205),_0x58e1d0=>{const _0x16076b=_0x15862f;_0x58e1d0['preventDefault'](),showLoading();const _0x16d292=document[_0x16076b(0x21f)]('locataire-nom')[_0x16076b(0x1f7)],_0x2d3bf6=document['getElementById'](_0x16076b(0x24b))[_0x16076b(0x1f7)],_0x57697e=document[_0x16076b(0x21f)]('locataire-contact')['value'],_0xe5ba8=document[_0x16076b(0x21f)](_0x16076b(0x22a))[_0x16076b(0x1f7)];addLocataire(_0x16d292,_0x2d3bf6,_0x57697e,_0xe5ba8)[_0x16076b(0x24c)](()=>{hideForm(addLocataireForm),loadLocataires();})[_0x16076b(0x1be)](_0x4314da=>{const _0x4c0367=_0x16076b;console[_0x4c0367(0x1ed)](_0x4c0367(0x226),_0x4314da),alert(_0x4c0367(0x250));})[_0x16076b(0x210)](()=>{hideLoading();});}),addSouscriptionForm[_0x15862f(0x1d3)]('submit',_0x29071c=>{const _0x3411fb=_0x15862f;_0x29071c['preventDefault'](),showLoading();const _0x953ca3=document[_0x3411fb(0x21f)](_0x3411fb(0x20c))[_0x3411fb(0x1f7)],_0x278f46=document[_0x3411fb(0x21f)](_0x3411fb(0x1ce))[_0x3411fb(0x1f7)],_0x307884=parseInt(document['getElementById']('souscription-caution')[_0x3411fb(0x1f7)]),_0x2f0e19=parseInt(document[_0x3411fb(0x21f)](_0x3411fb(0x25c))[_0x3411fb(0x1f7)]),_0x31265e=document[_0x3411fb(0x21f)](_0x3411fb(0x1c6))[_0x3411fb(0x1f7)],_0x3b04db=document[_0x3411fb(0x21f)](_0x3411fb(0x204))['value'];addSouscription(_0x953ca3,_0x278f46,_0x307884,_0x2f0e19,_0x31265e,_0x3b04db)['then'](()=>{hideForm(addSouscriptionForm),loadSouscriptions();})['catch'](_0xba0c00=>{const _0x15ac79=_0x3411fb;console[_0x15ac79(0x1ed)](_0x15ac79(0x1b8),_0xba0c00),alert(_0x15ac79(0x1b0));})['finally'](()=>{hideLoading();});});async function addProprietaire(_0x14a8d2,_0x475120,_0x2253df,_0x3fd62f,_0x174ba4){const _0x40d255=_0x15862f,_0x34850b=ref(database,_0x40d255(0x1f9)),_0x15884e=push(_0x34850b);await set(_0x15884e,{'nom':_0x14a8d2,'prenom':_0x475120,'contact':_0x2253df,'email':_0x3fd62f,'adresse':_0x174ba4});}async function addMaison(_0x549e67,_0x1a7abc,_0x232194,_0xc7d1a3,_0x4b273a,_0x3e4161,_0x4edbf7){const _0x213e83=ref(database,'maisons'),_0x407531=push(_0x213e83);await set(_0x407531,{'proprietaire':_0x549e67,'type':_0x1a7abc,'pieces':_0x232194,'ville':_0xc7d1a3,'commune':_0x4b273a,'quartier':_0x3e4161,'loyer':_0x4edbf7});}async function addLocataire(_0x1a10ad,_0xf2445d,_0x3d3819,_0x453f4e){const _0x25e952=_0x15862f,_0xe08e9d=ref(database,_0x25e952(0x247)),_0x41b91d=push(_0xe08e9d);await set(_0x41b91d,{'nom':_0x1a10ad,'prenom':_0xf2445d,'contact':_0x3d3819,'email':_0x453f4e});}async function addSouscription(_0x4bca8a,_0x589bc5,_0x585d6c,_0x5358c1,_0x53ed1a,_0x489ef9){const _0x5421d2=_0x15862f,_0x22ae74=ref(database,_0x5421d2(0x207)),_0x134d62=push(_0x22ae74),_0x3700f1=ref(database,_0x5421d2(0x221)+_0x4bca8a),_0x5f4420=await get(_0x3700f1),_0x4deeb8=_0x5f4420[_0x5421d2(0x209)]()[_0x5421d2(0x1f3)];await set(_0x134d62,{'maison':_0x4bca8a,'locataire':_0x589bc5,'caution':_0x585d6c,'avance':_0x5358c1,'autres':_0x53ed1a,'dateDebut':_0x489ef9,'loyer':_0x4deeb8});}function loadProprietaires(){const _0x56e4ab=_0x15862f;showLoading();const _0x26750d=document[_0x56e4ab(0x1b6)](_0x56e4ab(0x21b));_0x26750d['innerHTML']='';const _0xf49ba7=ref(database,_0x56e4ab(0x1f9));onValue(_0xf49ba7,_0x2d34c0=>{const _0x22e844=_0x56e4ab,_0x4a4757=_0x2d34c0[_0x22e844(0x209)]();let _0x3da936=0x0,_0x447b1f=0x1;for(const _0x35ff36 in _0x4a4757){_0x3da936++;const _0x2cc3b7=_0x4a4757[_0x35ff36],_0x4335a0=document[_0x22e844(0x241)]('tr');_0x4335a0[_0x22e844(0x1fb)]=_0x22e844(0x19d)+_0x447b1f+_0x22e844(0x235)+_0x2cc3b7['nom']+_0x22e844(0x22e)+_0x2cc3b7[_0x22e844(0x1ac)]+_0x22e844(0x22e)+_0x2cc3b7[_0x22e844(0x211)]+_0x22e844(0x22e)+_0x2cc3b7['email']+_0x22e844(0x22e)+_0x2cc3b7['adresse']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions-cell\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-btn\x22\x20data-id=\x22'+_0x35ff36+_0x22e844(0x20a)+_0x35ff36+_0x22e844(0x200),_0x26750d['appendChild'](_0x4335a0),_0x447b1f++;}document[_0x22e844(0x21f)](_0x22e844(0x227))['textContent']=_0x3da936,hideLoading();},{'onlyOnce':!![]});}function loadMaisons(){const _0xb4a044=_0x15862f;showLoading();const _0x8a24b8=document['querySelector'](_0xb4a044(0x1d6));_0x8a24b8['innerHTML']='';const _0x584f42=ref(database,_0xb4a044(0x216));onValue(_0x584f42,_0x17b459=>{const _0x431462=_0xb4a044,_0x5c8e4b=_0x17b459[_0x431462(0x209)]();let _0x3e51bb=0x0,_0x2c00ee=0x1;const _0x5da795=document['getElementById'](_0x431462(0x244));_0x5da795[_0x431462(0x1fb)]=_0x431462(0x1f2);const _0x20db04=ref(database,_0x431462(0x1f9));get(_0x20db04)[_0x431462(0x24c)](_0x30ba7a=>{const _0x41da22=_0x431462,_0x38586f=_0x30ba7a['val']();for(const _0x385b08 in _0x38586f){const _0x4196f8=_0x38586f[_0x385b08],_0x44ee00=document[_0x41da22(0x241)]('option');_0x44ee00[_0x41da22(0x1f7)]=_0x385b08,_0x44ee00[_0x41da22(0x1b9)]=_0x4196f8[_0x41da22(0x1ea)]+'\x20'+_0x4196f8[_0x41da22(0x1ac)],_0x5da795['appendChild'](_0x44ee00);}});for(const _0x792b61 in _0x5c8e4b){_0x3e51bb++;const _0xe8e847=_0x5c8e4b[_0x792b61];get(ref(database,_0x431462(0x248)+_0xe8e847[_0x431462(0x256)]))[_0x431462(0x24c)](_0x57b8b2=>{const _0x1e2bf3=_0x431462,_0x4d9ef5=_0x57b8b2['val'](),_0x5adfee=_0x4d9ef5?_0x4d9ef5['nom']+'\x20'+_0x4d9ef5['prenom']:_0x1e2bf3(0x1a0),_0x145437=document[_0x1e2bf3(0x241)]('tr');_0x145437['innerHTML']=_0x1e2bf3(0x1fa)+_0x2c00ee+_0x1e2bf3(0x1ec)+_0x5adfee+_0x1e2bf3(0x1a9)+_0xe8e847[_0x1e2bf3(0x236)]+_0x1e2bf3(0x1a9)+_0xe8e847[_0x1e2bf3(0x1c0)]+_0x1e2bf3(0x1a9)+_0xe8e847[_0x1e2bf3(0x203)]+',\x20'+_0xe8e847[_0x1e2bf3(0x1b7)]+',\x20'+_0xe8e847[_0x1e2bf3(0x21c)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0xe8e847[_0x1e2bf3(0x1f3)]+_0x1e2bf3(0x228)+_0x792b61+_0x1e2bf3(0x1e6)+_0x792b61+'\x22>Supprimer</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x8a24b8[_0x1e2bf3(0x1cd)](_0x145437),_0x2c00ee++;});}document[_0x431462(0x21f)](_0x431462(0x229))[_0x431462(0x230)]=_0x3e51bb,hideLoading();},{'onlyOnce':!![]});}function loadLocataires(){const _0x418296=_0x15862f;showLoading();const _0x408660=document['querySelector']('#locataires-list\x20tbody');_0x408660[_0x418296(0x1fb)]='';const _0x55fb2f=ref(database,'locataires');onValue(_0x55fb2f,_0x381367=>{const _0x229144=_0x418296,_0x1d3cb9=_0x381367[_0x229144(0x209)]();let _0x183dbe=0x0,_0x306398=0x1;for(const _0x34d07f in _0x1d3cb9){_0x183dbe++;const _0x1687cd=_0x1d3cb9[_0x34d07f],_0x338f86=document[_0x229144(0x241)]('tr');_0x338f86['innerHTML']=_0x229144(0x193)+_0x306398+_0x229144(0x24e)+_0x1687cd['nom']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x1687cd['prenom']+_0x229144(0x1ad)+_0x1687cd[_0x229144(0x211)]+_0x229144(0x1ad)+_0x1687cd[_0x229144(0x224)]+_0x229144(0x19a)+_0x34d07f+_0x229144(0x234)+_0x34d07f+_0x229144(0x1df),_0x408660[_0x229144(0x1cd)](_0x338f86),_0x306398++;}document['getElementById'](_0x229144(0x22c))[_0x229144(0x230)]=_0x183dbe,hideLoading();},{'onlyOnce':!![]});}function loadSouscriptions(){const _0x515bd3=_0x15862f;showLoading();const _0x3ce0b8=document[_0x515bd3(0x1b6)]('#souscriptions-list\x20tbody');_0x3ce0b8[_0x515bd3(0x1fb)]='';const _0x411fe9=document[_0x515bd3(0x21f)](_0x515bd3(0x20c));_0x411fe9[_0x515bd3(0x1fb)]=_0x515bd3(0x1c2);const _0x92e0fc=ref(database,_0x515bd3(0x216));get(_0x92e0fc)[_0x515bd3(0x24c)](_0x389774=>{const _0x208901=_0x515bd3,_0x417766=_0x389774[_0x208901(0x209)]();for(const _0x15c117 in _0x417766){const _0x16a9ef=_0x417766[_0x15c117],_0x37c0e2=document[_0x208901(0x241)](_0x208901(0x1d9));_0x37c0e2['value']=_0x15c117,_0x37c0e2[_0x208901(0x1b9)]=_0x15c117+_0x208901(0x19f)+_0x16a9ef[_0x208901(0x203)]+',\x20'+_0x16a9ef[_0x208901(0x1b7)]+',\x20'+_0x16a9ef[_0x208901(0x21c)],_0x411fe9[_0x208901(0x1cd)](_0x37c0e2);}});const _0x3fa69d=document['getElementById'](_0x515bd3(0x1ce));_0x3fa69d['innerHTML']=_0x515bd3(0x1d8);const _0x5a703c=ref(database,_0x515bd3(0x247));get(_0x5a703c)[_0x515bd3(0x24c)](_0x5d0f89=>{const _0x49cdab=_0x515bd3,_0x4370b5=_0x5d0f89[_0x49cdab(0x209)]();for(const _0x1ff483 in _0x4370b5){const _0x2ed2e8=_0x4370b5[_0x1ff483],_0x442ab2=document[_0x49cdab(0x241)](_0x49cdab(0x1d9));_0x442ab2[_0x49cdab(0x1f7)]=_0x1ff483,_0x442ab2['text']=_0x2ed2e8['nom']+'\x20'+_0x2ed2e8[_0x49cdab(0x1ac)],_0x3fa69d[_0x49cdab(0x1cd)](_0x442ab2);}});const _0x292d52=ref(database,_0x515bd3(0x207));onValue(_0x292d52,_0x2f65e9=>{const _0xcf7906=_0x515bd3,_0x4efb99=_0x2f65e9[_0xcf7906(0x209)]();let _0x51fae2=0x0,_0x3e0654=0x1;for(const _0x2cfd78 in _0x4efb99){_0x51fae2++;const _0x2a9a3a=_0x4efb99[_0x2cfd78],_0x4acbad=document[_0xcf7906(0x241)]('tr');_0x4acbad[_0xcf7906(0x1fb)]=_0xcf7906(0x193)+_0x2a9a3a[_0xcf7906(0x1f0)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x2a9a3a['locataire']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x2a9a3a[_0xcf7906(0x215)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x2a9a3a[_0xcf7906(0x1e4)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x2a9a3a[_0xcf7906(0x1a8)]+_0xcf7906(0x1ad)+_0x2a9a3a['dateDebut']+_0xcf7906(0x1ad)+_0x2a9a3a['loyer']+_0xcf7906(0x19a)+_0x2cfd78+_0xcf7906(0x234)+_0x2cfd78+_0xcf7906(0x1df),_0x3ce0b8['appendChild'](_0x4acbad),_0x3e0654++;}document[_0xcf7906(0x21f)](_0xcf7906(0x1c7))[_0xcf7906(0x230)]=_0x51fae2,hideLoading();},{'onlyOnce':!![]});}document[_0x15862f(0x1b6)]('#proprietaires-list\x20tbody')[_0x15862f(0x1d3)]('click',handleEditDelete),document[_0x15862f(0x1b6)]('#maisons-list\x20tbody')['addEventListener'](_0x15862f(0x18f),handleEditDelete),document[_0x15862f(0x1b6)](_0x15862f(0x1b4))[_0x15862f(0x1d3)](_0x15862f(0x18f),handleEditDelete),document[_0x15862f(0x1b6)](_0x15862f(0x1d2))['addEventListener'](_0x15862f(0x18f),handleEditDelete);function handleEditDelete(_0x257324){const _0x76b67a=_0x15862f,_0x31869f=_0x257324['target'];if(_0x31869f[_0x76b67a(0x196)][_0x76b67a(0x18d)](_0x76b67a(0x190))){const _0x37207a=_0x31869f[_0x76b67a(0x1ab)]['id'],_0x284c12=_0x31869f[_0x76b67a(0x1db)](_0x76b67a(0x220))['id'];console[_0x76b67a(0x1fd)](_0x76b67a(0x1e5),_0x284c12,_0x37207a);}else{if(_0x31869f['classList']['contains'](_0x76b67a(0x222))){const _0x262270=_0x31869f[_0x76b67a(0x1ab)]['id'],_0x313b41=_0x31869f[_0x76b67a(0x1db)]('.content-section')['id'];deleteItem(_0x313b41,_0x262270);}}}async function deleteItem(_0x222729,_0x47638f){const _0x3f8423=_0x15862f;showLoading();try{const _0x25fb55=ref(database,_0x222729+'/'+_0x47638f);await remove(_0x25fb55);if(_0x222729===_0x3f8423(0x1f9))loadProprietaires();else{if(_0x222729===_0x3f8423(0x216))loadMaisons();else{if(_0x222729===_0x3f8423(0x247))loadLocataires();else _0x222729===_0x3f8423(0x207)&&loadSouscriptions();}}}catch(_0x36df2c){console['error'](_0x3f8423(0x1a6)+_0x222729+':',_0x36df2c),alert(_0x3f8423(0x1a6)+_0x222729+'.');}finally{hideLoading();}}const subscribeMonthlyBtn=document[_0x15862f(0x21f)](_0x15862f(0x218)),subscribeYearlyBtn=document[_0x15862f(0x21f)]('subscribe-yearly-btn'),cancelSubscriptionBtn=document['getElementById'](_0x15862f(0x1c4));subscribeMonthlyBtn['addEventListener'](_0x15862f(0x18f),()=>{handleSubscription('monthly');}),subscribeYearlyBtn[_0x15862f(0x1d3)](_0x15862f(0x18f),()=>{handleSubscription('yearly');});async function handleSubscription(_0x3f67a3){const _0x23bf54=_0x15862f;if(currentUser&&currentUser[_0x23bf54(0x192)]&&currentUser[_0x23bf54(0x192)][_0x23bf54(0x1c3)]===_0x23bf54(0x1e8)){alert(_0x23bf54(0x240));return;}const _0x470b70=_0x3f67a3===_0x23bf54(0x1d0)?0x3e8:0x2710,_0x54ecd5=_0x3f67a3===_0x23bf54(0x1d0)?_0x23bf54(0x1e0):'Abonnement\x20annuel\x20à\x20la\x20plateforme\x20de\x20gestion\x20locative';showLoading(),FedaPay['init']({'public_key':_0x23bf54(0x1e9),'transaction':{'amount':_0x470b70,'description':_0x54ecd5},'customer':{'email':_0x23bf54(0x249)},'onComplete':async function(_0x452662){const _0x11a33b=_0x23bf54;if(_0x452662[_0x11a33b(0x1d5)]===FedaPay['CHECKOUT_COMPLETED']){const _0x191f92=new Date(),_0x521773=new Date(_0x3f67a3===_0x11a33b(0x1d0)?_0x191f92['getTime']()+0x1e*0x18*0x3c*0x3c*0x3e8:_0x191f92[_0x11a33b(0x1a7)]()+0x16d*0x18*0x3c*0x3c*0x3e8),_0x351db0={'status':_0x11a33b(0x1e8),'type':_0x3f67a3,'startDate':_0x191f92[_0x11a33b(0x1de)](),'endDate':_0x521773['toISOString']()};await update(ref(database,_0x11a33b(0x197)+currentUser['id']+_0x11a33b(0x22d)),_0x351db0),currentUser&&(currentUser['subscription']=_0x351db0,localStorage[_0x11a33b(0x19b)]('currentUser',JSON['stringify'](currentUser))),checkUserRoleAndSubscription(),alert('Abonnement\x20'+(_0x3f67a3===_0x11a33b(0x1d0)?'mensuel':_0x11a33b(0x246))+_0x11a33b(0x259)),loadDashboardData();}else _0x452662[_0x11a33b(0x1d5)]===FedaPay[_0x11a33b(0x22b)]?alert(_0x11a33b(0x1af)):(console[_0x11a33b(0x1fd)](_0x11a33b(0x1b1),_0x452662),alert(_0x11a33b(0x23c)));}})[_0x23bf54(0x1a1)](),hideLoading();}async function loadDashboardData(){const _0x410d03=_0x15862f;if(!isAuthenticated)return;const _0x483977=ref(database,'proprietaires');onValue(_0x483977,_0x21a0aa=>{const _0x28f253=_0xc63c,_0x400ac5=_0x21a0aa[_0x28f253(0x209)](),_0x57c10e=_0x400ac5?Object[_0x28f253(0x1bf)](_0x400ac5)['length']:0x0;document[_0x28f253(0x21f)]('dashboard-proprietaires-count')['textContent']=_0x57c10e;});const _0x1883c8=ref(database,_0x410d03(0x247));onValue(_0x1883c8,_0x40d02e=>{const _0x2a9e0e=_0x410d03,_0x414d30=_0x40d02e['val'](),_0x11db8f=_0x414d30?Object[_0x2a9e0e(0x1bf)](_0x414d30)[_0x2a9e0e(0x212)]:0x0;document[_0x2a9e0e(0x21f)]('dashboard-locataires-count')[_0x2a9e0e(0x230)]=_0x11db8f;});const _0x414d37=ref(database,_0x410d03(0x216));onValue(_0x414d37,_0x5a465e=>{const _0x262148=_0x410d03,_0x28f1d8=_0x5a465e[_0x262148(0x209)](),_0x1e5a36=_0x28f1d8?Object[_0x262148(0x1bf)](_0x28f1d8)[_0x262148(0x212)]:0x0;document[_0x262148(0x21f)]('dashboard-maisons-count')[_0x262148(0x230)]=_0x1e5a36;});const _0x1b9d41=ref(database,_0x410d03(0x207));onValue(_0x1b9d41,_0x4f30c0=>{const _0x3242f9=_0x410d03,_0x3e2f5a=_0x4f30c0[_0x3242f9(0x209)](),_0x1b87c7=_0x3e2f5a?Object[_0x3242f9(0x1bf)](_0x3e2f5a)[_0x3242f9(0x212)]:0x0;document[_0x3242f9(0x21f)](_0x3242f9(0x1c7))[_0x3242f9(0x230)]=_0x1b87c7;});const _0x3121b0=ref(database,_0x410d03(0x198));onValue(_0x3121b0,_0x5a2000=>{const _0x2df8bf=_0x410d03,_0x252feb=_0x5a2000[_0x2df8bf(0x209)]();let _0x39c8ad=0x0;for(const _0x1c878a in _0x252feb){const _0x5eda00=_0x252feb[_0x1c878a];_0x5eda00[_0x2df8bf(0x192)]&&_0x5eda00['subscription'][_0x2df8bf(0x1c3)]===_0x2df8bf(0x1e8)&&_0x39c8ad++;}document[_0x2df8bf(0x21f)]('dashboard-abonnements-count')[_0x2df8bf(0x230)]=_0x39c8ad;});}async function startTrial(){const _0x1c914b=_0x15862f;if(currentUser&&currentUser[_0x1c914b(0x192)]&&currentUser[_0x1c914b(0x192)][_0x1c914b(0x1c3)]===_0x1c914b(0x1dc)){alert(_0x1c914b(0x23d));return;}const _0x7681e3=new Date(Date[_0x1c914b(0x195)]()+0x7*0x18*0x3c*0x3c*0x3e8),_0x4a2013={'status':_0x1c914b(0x1dc),'startDate':new Date()[_0x1c914b(0x1de)](),'endDate':_0x7681e3[_0x1c914b(0x1de)]()};await update(ref(database,'users/'+currentUser['id']+_0x1c914b(0x22d)),_0x4a2013),currentUser&&(currentUser['subscription']=_0x4a2013,localStorage[_0x1c914b(0x19b)](_0x1c914b(0x1e7),JSON['stringify'](currentUser))),checkUserRoleAndSubscription(),alert(_0x1c914b(0x20d)),loadDashboardData();}subscribeBtn['addEventListener'](_0x15862f(0x18f),()=>{const _0x5a86f4=_0x15862f;if(currentUser&&currentUser[_0x5a86f4(0x192)]&&currentUser[_0x5a86f4(0x192)][_0x5a86f4(0x1c3)]==='active'){alert(_0x5a86f4(0x240));return;}confirm('Voulez-vous\x20démarrer\x20une\x20période\x20d\x27essai\x20gratuite\x20de\x207\x20jours\x20?')?startTrial():initFedapayPayment();}),cancelSubscriptionBtn[_0x15862f(0x1d3)](_0x15862f(0x18f),async()=>{const _0x33088f=_0x15862f;currentUser&&currentUser[_0x33088f(0x192)]?confirm(_0x33088f(0x1fc))&&(await update(ref(database,_0x33088f(0x197)+currentUser['id']+_0x33088f(0x22d)),{'status':_0x33088f(0x18e)}),currentUser[_0x33088f(0x192)]['status']=_0x33088f(0x18e),localStorage['setItem'](_0x33088f(0x1e7),JSON[_0x33088f(0x242)](currentUser)),checkUserRoleAndSubscription(),alert('Abonnement\x20annulé.'),loadDashboardData()):alert(_0x33088f(0x1b5));});function logout(){const _0x25e3ee=_0x15862f;localStorage[_0x25e3ee(0x1c9)](_0x25e3ee(0x1e7)),isAuthenticated=![],currentUser=null,window[_0x25e3ee(0x1bc)][_0x25e3ee(0x257)]=_0x25e3ee(0x1ee);}const logoutButton=document['createElement'](_0x15862f(0x25a));logoutButton['id']=_0x15862f(0x253),logoutButton[_0x15862f(0x230)]=_0x15862f(0x1e1),document[_0x15862f(0x194)]['appendChild'](logoutButton),document[_0x15862f(0x21f)]('logout-btn')[_0x15862f(0x1d3)](_0x15862f(0x18f),logout);function checkUserAccess(_0x118ebe=null){const _0x135072=_0x15862f;if(currentUser&&currentUser[_0x135072(0x192)]&&(currentUser[_0x135072(0x192)][_0x135072(0x1c3)]===_0x135072(0x1e8)||currentUser[_0x135072(0x192)][_0x135072(0x1c3)]===_0x135072(0x1dc)))_0x118ebe&&(contentSections[_0x135072(0x1da)](_0x27ecc7=>_0x27ecc7[_0x135072(0x196)][_0x135072(0x1bd)]('active')),document['getElementById'](_0x118ebe)[_0x135072(0x196)][_0x135072(0x213)](_0x135072(0x1e8)));else{alert('Vous\x20devez\x20avoir\x20un\x20abonnement\x20actif\x20ou\x20une\x20période\x20d\x27essai\x20pour\x20accéder\x20à\x20cette\x20section.'),contentSections['forEach'](_0x4d22a9=>_0x4d22a9['classList'][_0x135072(0x1bd)]('active')),document['getElementById'](_0x135072(0x237))['classList']['add'](_0x135072(0x1e8)),tabs[_0x135072(0x1da)](_0x406e7a=>_0x406e7a[_0x135072(0x196)][_0x135072(0x1bd)]('active'));const _0x401d68=document[_0x135072(0x1b6)](_0x135072(0x243));_0x401d68&&_0x401d68['classList'][_0x135072(0x213)](_0x135072(0x1e8));}}function initializeDataLoad(){isAuthenticated&&(checkUserRoleAndSubscription(),checkAndUpdateSubscriptionStatus(),loadDashboardData(),loadProprietaires(),loadMaisons(),loadLocataires(),loadSouscriptions());}initializeDataLoad();